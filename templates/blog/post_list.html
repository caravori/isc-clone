{% extends 'base.html' %}

{% block title %}Handler Diaries - {{ block.super }}{% endblock %}

{% block content %}
<div class="card" style="background: linear-gradient(135deg, #dcfce7 0%, #d1fae5 100%); border-left: 4px solid #10b981;">
    <h1 style="color: #065f46; margin-bottom: 0.5rem;">ğŸ“ Handler Diaries</h1>
    <p style="font-size: 1.1rem; color: #047857;">
        Security insights and threat analysis from our team of handlers. Browse the latest cybersecurity findings and recommendations.
    </p>
</div>

{% if posts %}
    {% for post in posts %}
    <div class="card">
        <h2 style="margin-bottom: 0.75rem;">
            <a href="{% url 'blog:post_detail' post.slug %}" style="color: #065f46; text-decoration: none;">{{ post.title }}</a>
        </h2>
        <p class="text-muted" style="margin-bottom: 1rem;">
            <strong style="color: #10b981;">{{ post.author.get_full_name|default:post.author.username }}</strong> | 
            {{ post.published_date|date:"F j, Y, g:i a" }}
            {% if post.category %}
                | <a href="{% url 'blog:category_posts' post.category.slug %}" class="tag" style="margin-left: 0.5rem;">
                    ğŸ“š {{ post.category.name }}
                </a>
            {% endif %}
            | <span style="color: #6b7280;">ğŸ‘ {{ post.views_count }} views</span>
        </p>
        <p style="color: #4b5563; line-height: 1.7; font-size: 1.05rem;">
            {{ post.excerpt|default:post.content|striptags|truncatewords:60 }}
        </p>
        <a href="{% url 'blog:post_detail' post.slug %}" class="btn" style="margin-top: 1rem;">Read Full Article â†’</a>
    </div>
    {% endfor %}
    
    {# Pagination #}
    {% if page_obj.has_other_pages %}
    <div class="card" style="text-align: center; padding: 1.5rem;">
        <div style="display: flex; justify-content: center; align-items: center; gap: 1rem; flex-wrap: wrap;">
            {% if page_obj.has_previous %}
                <a href="?page=1" class="btn-secondary btn">âª First</a>
                <a href="?page={{ page_obj.previous_page_number }}" class="btn">â† Previous</a>
            {% endif %}
            
            <span style="padding: 0.625rem 1.25rem; background: #f3f4f6; border-radius: 8px; font-weight: 600;">
                Page {{ page_obj.number }} of {{ page_obj.paginator.num_pages }}
            </span>
            
            {% if page_obj.has_next %}
                <a href="?page={{ page_obj.next_page_number }}" class="btn">Next â†’</a>
                <a href="?page={{ page_obj.paginator.num_pages }}" class="btn-secondary btn">Last â©</a>
            {% endif %}
        </div>
    </div>
    {% endif %}
{% else %}
    <div class="card" style="text-align: center; padding: 4rem 2rem; background: #f9fafb;">
        <p style="font-size: 4rem; margin-bottom: 1rem;">ğŸ“</p>
        <h2 style="color: #6b7280; margin-bottom: 1rem;">No Posts Published Yet</h2>
        <p class="text-muted" style="margin-bottom: 2rem;">Start sharing your security insights with the community.</p>
        <a href="/admin/blog/post/add/" class="btn">Create Your First Post</a>
    </div>
{% endif %}
{% endblock %}
